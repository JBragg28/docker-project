FROM ubuntu
MAINTAINER Jordan Bragg

RUN apt-get update
RUN apt-get install apache2
RUN apt-get install mysql-server
RUN apt-get install php5 php5-cli php5-common php5-mysql

#updating timezone
RUN sed -i '/date.timezone =/c\date.timezone = UTC' /etc/php5/apache2/php.ini

#adding apt repository
RUN wget http://repo.zabbix.com/zabbix/3.0/ubuntu/pool/main/z/zabbix-release/zabbix-release_3.0-1+x$
RUN dpkg -i zabbix-release_3.0-1+xenial_all.deb
RUN apt-get update

#install zabbix server
RUN apt-get install zabbix-server-mysql zabbix-frontend-php

RUN service mysql start\
&& mysql -u root -e "create user 'zabbix';"\
&& mysql -u root -e "create database zabbixdb;"\
&& mysql -u root -e "grant all privileges on zabbixdb.* to'zabbix';"\
&& mysql -u root -e "flush privileges;"
